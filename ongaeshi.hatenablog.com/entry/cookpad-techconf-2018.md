---
Title: Cookpad TechConf 2018 の感想(速記)
Category:
- イベント
Date: 2018-02-11T02:16:40+09:00
URL: https://ongaeshi.hatenablog.com/entry/cookpad-techconf-2018
EditURL: https://blog.hatena.ne.jp/tuto0621/ongaeshi.hatenablog.com/atom/entry/17391345971615259406
---

https://techconf.cookpad.com/2018/  
配信: https://youtu.be/r8qGpKEFveQ

進行がAmazon Pollyだった。時折人間だともう少し聞き取りやすいかなというときがあったが全般としては問題なかった。TechConfならこれで十分かもしれない。繰り返す使うようなケースならさらに便利になりそう。

※ スライドリンクを見つけきれなかったので見つけた方は教えてください

## 毎日の料理を楽しみにする挑戦をし続けた20年

「毎日の料理を楽しみにする会社」というビジョンは何年たっても解決しがいのあるよいビジョンだと思った。そこから分割されたテックカンパニーとしてのビジョン(目標？)

- 料理が楽しくなる
- ユーザーの生活の役に立つ
- 今の技術を活かせる

もよい。

2017年は海外展開を強化していたらしく

- 日本: 5665万人 (レシピ283万品)
- 海外: 3429万人 (レシピ119万品)

最近の新サービスを立ち上げるときの手法としてSprint本を使っている。

[asin:447806699X:detail]

## クックパッドの “体系的” サービス開発
http://techlife.cookpad.com/entry/2018/02/10/150709

BMLループ(Build Measure Learn)は前から順番にやろうとしてはいけない。むしろ最初にサイクル全体を設計するべき。

Report.mdという分析結果のドキュメントをPRにあげてレビュープロセスをとおす仕組みが素晴らしいと思った。個人でもコードレビューと同じくらいドキュメントやコメントのレビューは効果的だと感じるときがある(参加できる人数が多いという意味ではコードレビューよりも効果が高いかもしれない)ので、重要なドキュメントは積極的にレビューを通すべきかもしれない。

Report.mdは他の発表でも言及されていた。TechConf全体を通して繰り返し語られていることが多く社内で技術基盤が本当に共有されていることがよくわかる。

## クックパッドクリエイティブワークフロー
https://speakerdeck.com/1020tomoya/cookpad-creative-workflow

デザイナ視点でのサービス開発の話はなかなか聞けないので楽しかった。セッションのおかげでクックパッドの基本的なサービス開発の規模感をかなり想像することができた。

- 全体で140名
- 投稿(A,B) 検索(A,B) きろく(A) 有料会員(A,B,C) のようなチームに分かれる
- アプリ開発は基本的に 2week~1month
- 目的と仮説を明確にする
- GitHub issueでアイデア発散
- GitHub issueによるデザインレビュー
- 指標・ログの設計もチーム全員で
- 数値は全員がすぐ見える場所に(発表者の方のチームではredashを使っているらしい)

分析ツールのセットアップはチーム内のだれが行うのか？というのを聞きたかったがお話する機会が持てなかった。残念。

## What/How to design test automation for mobile
SPLITという手法が紹介されていた。テストを書くときに問題を分割しながらよく考える。

- Scope: What is your test target?
- Phase: What phase would you like to automate?
- Level: How deep do you dive to automation would?
- sIze:  What size to you test?
- Type:  What type do you test?

## Rubyの会社でRustを書くということ
楽しみにしていたセッション。実験的に一部でRustを使い始めたのかな？と思ったら、ライブラリ層はオープンソースで公開しながら、プッシュ通知の配信基盤をがっつり差し替えてて(かつ高速化されてて)びびった。

複数のクエリをマルチスレッドで受け取りながら定期的に1つのクエリにまとめてDBに問い合わせることで高速化をはかっているらしい。

Rustでマルチスレッドプログラミングを書くとデータ競合が起きた箇所にコンパイルエラーを出してくれるので、安心して書けるようになる(C++でよくある「念のためlock」が不要になるらしい、いいなー)。

これは他の言語ではできない大きなメリットだと感じた。(これからRustを他の人にすすめるときに使っていこう)

## cookpad storeTV 〜クックパッド初のハードウェア開発〜
スーパーに置いて料理動画を配信することでお客さんを集め、素材となる商品を売ったり広告を配信するらしい。

カメラを使って顔認識(個人情報は除外して数だけを記録)することで広告中に何人の人が見ているか検出して広告効果を測定する、という仕組みが興味深かった。

## Lifestyle Product Award授賞式
- 優秀賞: ごくり
  - ものを飲み込む能力を測定するデバイスが30万円ゲット

## Challenges for Global Service from a Perspective of SRE
https://speakerdeck.com/takanabe/challenges-for-global-service-from-a-perspective-of-sre

グローバルサービスを展開すると色々起きる。例えば特定の国だけユーザー体験が悪かったり(CDNのFastlyを導入することで解決)。盛り上がるイベントが国によって全然違ったり。デプロイのオペレーションコストが高くなったり。

toilという言葉を知ることができた。以下のような条件を満たすものらしい。

- 手動で対応している
- 自動化の余地がある
- 繰り返し発生する
- 発生してからじゃないと対応できない
- サービスの改善につながらない
- サービスやユーザーの数に応じて増加

例えば社内サービスのユーザーアカウントの追加など。これはどこの組織でも発生するものなので見つけたときはtoilと言おう。

## 動き出したクックパッドのCtoCビジネス
https://twitter.com/1amageek/status/962349374239006721

Komerco という料理用の器などを売り買いするプラットフォームが発表されていた。春にリリース予定。

サーバーにfirebaseを使うことで開発チームはServerlessに。swift用のfirebaseライブラリやfirebaseの日本コミュニティを運営しながら進めている。

ライブラリ層を公開しながら開発していくスタイルは社内で大分一般的になっているのだな、と感じた。

## Solve "unsolved" image recognition problems in service applications
https://speakerdeck.com/diracdiego/20180210-cookpad-techconf2018-yoheikikuta

料理にっきというサービスでスマホ内の画像から料理と非料理を自動で判定したり、料理画像からカテゴリ(肉料理、やきそば、など)の分析を機械学習で行なっている。

特にカテゴリの判定は難しく、誤判定しやすいカテゴリを見極めるための独自のアルゴリズムを考案し論文も発表。

上記のアルゴリズムによって例えばやきそばとビーフンは誤判定しやすいことが分かったため、分けずにまとめた。

これから機械学習でホットになりそうな分野として、モバイル側での実行や動画の解析が挙げられる。

特にモバイル側でモデルが実行できるようになると、非料理と判定された画像はいちいちサーバー側にアップしなくていいようになり、帯域的にもセキュリティ的にも安心感が増すのでより使われるようになりそう。

自前の学習結果を簡単にモバイルの画像判定に使えるようなアプリが出たら楽しそうだなぁ。

## Beyond the Boundaries
全体を通してエンジニアが重要視されている会社だと感じた。休憩や懇親会でクックパッドのエンジニアの方と話すとやる気に溢れていて楽しくやってそう(競争も激しそう)。

今クックパッドが取り組んでいる技術セットは2018に何を学ぶべきかの指針になりそうだった。

- Rails 
- golang
- Rust
- Swift
- Kotlin
- React Native (プロトタイピングに使っているらしい)
- Firebase

下はサーバー周り。

- AWS ECS
- docker
- Hako

ハッカソンはシンプルに羨ましい。食と料理にまつわる社会課題マップは後でじっくり見てみよう。

http://cookpad.01booster.com/images/map.pdf

## LT, 懇親会
クックパッド柄の寿司が美味かった。

ゲストの方とお話。機械学習のこと色々教えてもらって勉強になった。一度投げ出してしまった「[ゼロから作るDeep Learning](https://www.oreilly.co.jp/books/9784873117584/)」はいつか読み返したい。でも最近「[仕事ではじめる機械学習](https://www.oreilly.co.jp/books/9784873118215/)」を買ってしまったばかりなのでまずはこちらから、、。[Keras](https://keras.io/ja/)のチュートリアルも日本語化されててよいらしい。

LTで海外事業の話をされていた [@yuseinishiyama](https://twitter.com/yuseinishiyama/) さんとお話。英語学習は色々やって全体を底上げした方がよい。アウトプットが足りないパターンが多いので例えばDMM英会話すると何のボキャブラリーが足りないか分かるので他の勉強も効率的になる。海外に行くとそれでもネイティブには通じないことがあるのでさらにレベルアップするとのこと。海外で働きたいエンジニアを絶賛募集中。

LTでAmazon Echoのクックパッド対応をの話をされていた [@y_am_a_da](http://techlife.cookpad.com/entry/2017/11/21/181206) さんとお話。音声と料理の相性はいいだろうな、と思っていたが入力はさておき出力が大変(声だけでレシピを伝えるのを想像してほしい)だという話を聞いてそれはそうだな、と納得。料理は手を使わないといけないので本当はスマホを操作したくない。うまくいったら大きなブレークスルーだよなぁ。この前発表されてたIntelの眼鏡に投影するといいのかな。

## まとめ
面白かった。Sprint本は買う。toilという言葉は便利。Rustでなんか作りたい。
