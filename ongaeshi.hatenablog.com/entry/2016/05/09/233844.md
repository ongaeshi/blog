---
Title: PictRubyã§ã‚¹ãƒãƒ›ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° - Hit & Blow ã‚²ãƒ¼ãƒ 
Date: 2016-05-09T23:38:44+09:00
URL: https://ongaeshi.hatenablog.com/entry/2016/05/09/233844
EditURL: https://blog.hatena.ne.jp/tuto0621/ongaeshi.hatenablog.com/atom/entry/10328537792364921551
Draft: true
---

ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‹ã‚‰å…¥åŠ›ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã‚²ãƒ¼ãƒ ã£ã½ã„ã‚‚ã®ã‚’ä½œã‚Œã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã—ãŸã€‚

! gif

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[https://itunes.apple.com/jp/app/pictruby/id1042498865?mt=8&uo=4:embed]

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

ä»¥ä¸‹ã‚’ã‚³ãƒ”ãƒšã—ã¦PictRubyã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚

[get_sample.rb](http://ongaeshi.hatenablog.com/entry/read-pictrubygems-script-from-pictruby-app)ã‚’ä½¿ã£ã¦`hit_and_blow`ã§ã‚‚å–å¾—ã™ã‚‹ã¨ã“ãŒã§ãã¾ã™ã€‚

```ruby
# # hit_and_blow
#
# ## Description
# Hit & Blow Game.
# Please enter 4-digit number.

def main
  Popup.msg "Hit & Blow ğŸ”«"

  game = HitAndBlow.new

  loop do
    msg = []
    msg.push "Stage #{game.stage}"
    msg.push "â“â“â“â“ğŸ”«"
    # msg.push game.correct_answer.join("") # cheat..
    msg.push "Please enter 4-digit number."
    msg.push game.history.join("\n") if game.history.length > 0 

    input = Popup.input(msg.join("\n"))

    if input.nil?
      puts <<EOF
You lose.. ğŸ˜©ğŸ˜©ğŸ˜©
#{game.correct_answer.join("")}
#{game.history.join("\n")}
EOF
      break
    end

    hit, blow = game.check(input)
    
    if hit == 4
      puts <<EOF
You win!! ğŸ˜„ğŸ˜„ğŸ˜„ğŸ’ƒ
#{game.correct_answer.join("")}
#{game.history.join("\n")}
EOF
      break
    end
  end 
end

class HitAndBlow
  attr_reader :stage
  attr_reader :history
  attr_reader :correct_answer
  
  def initialize
    @correct_answer = generate_number
    @stage = 1
    @history = []
  end

  def check(answer_str)
    # Convert answer
    answer = answer_str.split("")[0..3].map { |i| i.to_i }

    # Calculate hit & blow
    hit = 0
    (0..3).each { |i| hit += 1 if answer[i] == @correct_answer[i] }

    blow = answer.reduce(0) { |t, e| @correct_answer.include?(e) ? t + 1 : t } - hit

    # Record history
    @history.push "#{@stage}: #{answer_str} [hit:#{hit} blow:#{blow}]"
    @stage += 1

    # Return value
    [hit, blow]
  end

  def generate_number
    list = (0..9).to_a
    (0..3).map { list.delete_at(rand(list.size-1)) }
  end
end

```

## ä½¿ã„æ–¹

æ•°å½“ã¦ã‚²ãƒ¼ãƒ ã§ã™ã€‚ãƒ©ãƒ³ãƒ€ãƒ ã§é¸ã°ã‚ŒãŸ4æ¡ã®æ•°å­—ã‚’Hit(ä½ç½®ã‚‚æ•°ã‚‚åˆã£ã¦ã„ã‚‹)ã¨Blow(æ•°ã¯åˆã£ã¦ã„ã‚‹ã‘ã©ä½ç½®ãŒé•ã†)ã¨ã„ã†ï¼’ã¤ã®ãƒ’ãƒ³ãƒˆã‚’é ¼ã‚Šã«å½“ã¦ã¾ã™ã€‚

! ã‚²ãƒ¼ãƒ ç”»é¢

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯[ãƒ©ãƒ³ãƒãƒ£ãƒ¼ã‚¢ãƒ—ãƒªçµŒç”±](http://ongaeshi.hatenablog.com/entry/pictruby-0.3)ã§é€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼ã«ç™»éŒ²ã—ã¦ãŠãã¨ã•ã‚‰ã«ä¾¿åˆ©ã§ã™ã€‚


